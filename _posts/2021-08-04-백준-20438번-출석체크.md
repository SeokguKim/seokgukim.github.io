---
title: 백준 20438번 출석체크
layout: post
tags: [cpp]
---
### 문제 개요
> 1번째 줄에 학생의 수 N, 졸고 있는 학생의 수 K, 지환이가 출석 코드를 보낼 학생의 수 Q, 주어질 구간의 수 M이 주어진다. (1 ≤ K, Q ≤ N ≤ 5,000, 1 ≤ M ≤ 50,000)  
> 2번째 줄과 3번째 줄에 각각 K명의 졸고 있는 학생의 입장 번호들과 Q명의 출석 코드를 받을 학생의 입장 번호들이 주어진다.  
> 4번째 줄부터 M개의 줄 동안 구간의 범위 S, E가 공백을 사이에 두고 주어진다. (3 ≤ S < E ≤ N + 2)  
> M개의 줄에 걸쳐서 각 구간에 대해서 출석이 되지 않은 학생들의 수를 출력하라.

### 시간제한이 너무 빡세다

이놈의 문제는 시간제한이 단 0.1초인 문제로, 알고리즘 자체를 구상하는 데는 얼마 걸리지도 않았고   
실제로 잘 돌아가는 코드를 10분만에 썼지만 시간제한 때문에 다 실패. 1시간 가량을 검색과 최적화에 썼다.  
**요새 컴퓨팅 능력 좋아서 파이썬이고 루비고 잘 돌아가는데 굳이 이런 빡센 조건 달아야 해?"**

### 코드
```c++
#include <iostream>
#include <vector>

using namespace std;

int N, K, Q, M, TM, TN, chk, tmp, con;//시간을 아끼려고 변수를 한번에 다 선언
bool sleep[5003];//벡터형으로 하고 싶었는데 벡터는 커지면 연산이 느려서 그냥 배열 씀
int check[5003];//인덱스 번호와 출석번호를 일치시키고 0이 인덱스에 있는걸 감안해서 배열 크기는 5003
vector<int> seg;//부분합을 저장해줄 벡터

int main()
{
    cin.tie(NULL); cout.tie(NULL);
	ios_base::sync_with_stdio(false);
  /*입출력 속도 빠르게 해주는 구문. 이거 없으면 망함*/
    
	cin >> N >> K >> Q >> M;
	seg.resize(N + 3, 0);//입력 받고 벡터 초기화

	while (K--) {
		cin >> tmp;
		sleep[tmp] = true;
	}
  /*입력받은 출석번호 기준으로 수면여부 추가*/
	while (Q--) {
		cin >> tmp;
		if (sleep[tmp]) continue;//출석번호 받은 학생이 자면 스킵
		con = tmp;//배수에 해당하는 출석번호
		while (con <= N + 2) {
			if (sleep[con]) {//중간에 자는 놈 있으면
				con += tmp;//출첵 안하고 넘김
				continue;
			}
			check[con] = 1;//아니면 출첵하고 넘김
			con += tmp;
		}
	}
	for (int i = 3; i <= N + 2; i++) {
		seg[i] = seg[i - 1] + check[i];//벡터에 부분합을 저장해 범위 주어질 때마다 반복문 안 돌게 해도 되게 함. 이거 없이 아래 반복문에 이중으로 집어넣으면 범위 줄 때 마다 돌아서 시간 초과
	}
	for (int i = 0; i < M; i++) {
		cin >> TN >> TM;
		cout << TM - TN + 1 - (seg[TM] - seg[TN-1]) << '\n';//부분합 구한게 출석한 애들이라 구간 크기에서 빼줘야함
	}
}
```

### 해설
일단 입출력을 더럽게 많이 받는다. 따라서 입출력 관련 정의를 해서 입출력을 개선하지 않으면 바로 시간이 초과되는 뭣같은 문제.  
`cin.tie(NULL); cout.tie(NULL); ios_base::sync_with_stdio(false);` 로 입출력을 개선하고 나머지 코드들의 경우에도  
단순히 1씩 임시변수를 증가시키는 반복문보단 시간 덜 잡아먹게 조건 단 while문으로 처리했다.
중간중간 자는 놈 있으면 컨티뉴도 써주고...  
그리고 이게 마지막 출력부의 경우 그냥 이중 반복문을 통해 카운터로 처리하려 했으나, 이럴 경우 범위가 주어질 때마다 돌아서  
시간초과가 되길래 다른 사람 풀이를 참고해 부분합을 구한 후 그걸 이용해 했다.

### 여담
사실 생각은 바로 났지만 시간제한이 뭣같았던 문제.  
컴퓨터 성능들도 다 좋아진 마당에 굳이 이런 빡빡한 제한 가지고 돌릴 일이 많이 있을까 모르겠지만 어쨌든 재미있었다.
